<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Study Music Engine</title>
<style>
body{font-family:sans-serif;max-width:560px;margin:60px auto;padding:0 16px;background:#f9f9f9;color:#1a1a1a}
h1{font-size:1.4rem;margin-bottom:4px}
p.sub{color:#555;font-size:.9rem;margin-bottom:20px}
input{width:100%;box-sizing:border-box;padding:10px 12px;font-size:1rem;border:1px solid #ccc;border-radius:6px}
button{margin-top:10px;width:100%;padding:10px;font-size:1rem;background:#4f46e5;color:#fff;border:none;border-radius:6px;cursor:pointer}
button:hover{background:#4338ca}
#out{margin-top:20px;padding:14px;background:#fff;border:1px solid #e0e0e0;border-radius:8px;font-size:.97rem;line-height:1.6;min-height:48px;display:none}
#err{color:#c0392b;margin-top:8px;font-size:.88rem}
</style>
</head>
<body>
<h1>Personalized Study Music Engine</h1>
<p class="sub">Tell us your mood, subject, and study duration to get a tailored music plan.</p>
<input id="inp" type="text" placeholder="e.g. stressed, 2 hours, math exam">
<button onclick="go()">Generate Music Plan</button>
<div id="err"></div>
<div id="out"></div>
<script>
async function go(){
  var inp=document.getElementById('inp');
  var out=document.getElementById('out');
  var err=document.getElementById('err');
  err.textContent='';
  out.style.display='block';
  out.textContent='Generating...';
  try{
    var r=await fetch('/solve',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({data:inp.value})
    });
    if(!r.ok) throw new Error('Server error');
    var j=await r.json();
    out.textContent=j.output||'No output received.';
  }catch(e){
    out.style.display='none';
    err.textContent='Request failed. Please try again.';
  }
}
document.getElementById('inp').addEventListener('keydown',function(e){if(e.key==='Enter')go();});
</script>
</body>
</html>
